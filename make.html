<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity Coding Contest - å•é¡Œã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</title>

<style>
body {
    font-family: sans-serif;
    background: #f4f4f4;
    margin: 0;
}

header {
    background: #2b4eff;
    color: white;
    padding: 15px;
    font-size: 20px;
    font-weight: bold;
}

.container {
    max-width: 900px;
    margin: 30px auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
}

textarea, input {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
}

button {
    padding: 10px 20px;
    background: #2b4eff;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

button:hover {
    opacity: 0.9;
}

.preview-box {
    background: #222;
    color: #eee;
    padding: 10px;
    white-space: pre-wrap;
    border-radius: 6px;
    margin-top: 10px;
}

</style>
</head>

<body>
<header>Unity Coding Contest å•é¡Œã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</header>

<div class="container">

<h2>å•é¡Œã®å†…å®¹ã‚’å…¥åŠ›</h2>

<label>å•é¡Œã‚¿ã‚¤ãƒˆãƒ«</label>
<input id="title" placeholder="ä¾‹ï¼šUnity Coding Contest 001 â€“ Debug.Log ã§æ–‡å­—åˆ—å‡ºåŠ›">

<label>å•é¡Œèª¬æ˜</label>
<textarea id="description" rows="4" placeholder="å•é¡Œæ–‡ã‚’å…¥åŠ›"></textarea>

<label>æ¡ä»¶ï¼ˆç®‡æ¡æ›¸ãï¼‰â€»1è¡Œ1æ¡ä»¶</label>
<textarea id="conditions" rows="4" placeholder="æ¡ä»¶ã‚’1è¡Œãšã¤å…¥åŠ›"></textarea>

<label>å‡ºåŠ›ä¾‹</label>
<input id="outputExample" placeholder="ä¾‹ï¼šHello World">

<label>æ­£è§£åˆ¤å®šã«ä½¿ã†æ­£è¦è¡¨ç¾ï¼ˆJSå½¢å¼ï¼‰</label>
<input id="regex" placeholder='ä¾‹ï¼š^Debug\\.Log\\("Hello World"\\);$'>

<button onclick="generate()">HTML ã‚’ç”Ÿæˆã™ã‚‹</button>

<h3>ç”Ÿæˆçµæœï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰</h3>
<div id="preview" class="preview-box">(ã“ã“ã«HTMLãŒç”Ÿæˆã•ã‚Œã¾ã™)</div>

<button onclick="downloadHTML()">HTML ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>

</div>

<script>
function escapeScriptTag(str){
    return str.replace(/<\/script>/g, '<\\/script>');
}

function generate(){
    const title = document.getElementById('title').value;
    const description = document.getElementById('description').value;
    const conditions = document.getElementById('conditions').value.split("\n").map(c => `<li>${c}</li>`).join("");
    const outputExample = document.getElementById('outputExample').value;
    const regex = document.getElementById('regex').value;

    let html = `
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>${title}</title>
<link rel="stylesheet" href="problem.css">
</head>

<body>
<header>${title}</header>

<div class="container">
    <h2>${title}</h2>

    <p>${description}</p>

    <h3>æ¡ä»¶</h3>
    <ul>
        ${conditions}
    </ul>

    <h3>å‡ºåŠ›ä¾‹</h3>
    <pre>${outputExample}</pre>

    <h3>è§£ç­”ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆC# / Unityå½¢å¼ï¼‰</h3>
    <div class="code-block">
<code>
using UnityEngine;

public class ProblemScript : MonoBehaviour {
    void Start() {
        // â˜…ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãã ã•ã„
    }
}
</code>
    </div>

    <h3>ã‚ãªãŸã®å›ç­”ã‚’å…¥åŠ›</h3>
    <textarea id="userCode"></textarea>
    <button onclick="checkAnswer()">Run</button>
    <div id="result"></div>
</div>

<script${""}>
function checkAnswer(){
    const code = document.getElementById('userCode').value.trim();
    const resultDiv = document.getElementById('result');
    const pattern = new RegExp(${JSON.stringify(regex)});

    if(pattern.test(code)){
        resultDiv.textContent = "ğŸ‰ æ­£è§£ã§ã™ï¼";
        resultDiv.className = "correct";
    } else {
        resultDiv.textContent = "âŒ ä¸æ­£è§£ã§ã™ã€‚ã‚‚ã†ä¸€åº¦è§£ãç›´ã—ã¦ãã ã•ã„ã€‚";
        resultDiv.className = "wrong";
    }
}
<\/script>

<footer>Â© 2025 Unity Coder Platform</footer>
</body>
</html>
`;

    document.getElementById('preview').textContent = html;
    window.generatedHTML = html;
}

function downloadHTML(){
    if(!window.generatedHTML){
        alert("å…ˆã« HTML ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼");
        return;
    }

    const blob = new Blob([window.generatedHTML], {type: "text/html"});
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = "unity_problem.html";
    a.click();

    URL.revokeObjectURL(url);
}
</script>

</body>
</html>
